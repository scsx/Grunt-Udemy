const canvasW=document.getElementById("tela").clientWidth,canvasH=document.getElementById("tela").clientHeight;function rnd(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function generateProportion(e){let t=60,n=[],i=100,l=e,a=[];for(let e=1;e<=l;e++){let a=Math.random()*t;e===l&&(a=i),n.push(a),t=i-=a}for(;n.length>0;){let e=Math.floor(Math.random()*n.length);a=a.concat(n.splice(e,1))}return a}function createComp(e,t,n,l,a=!1,o,d){for(document.getElementById("imageholder").style.backgroundImage="url('"+d+"')",bckCount=rnd(e,t),bckCountParts=generateProportion(bckCount),i=0;i<=bckCount;i++){let e=document.createElement("div");e.id="backDiv"+i,e.className="back",e.style.height=bckCountParts[i]+"%",e.style.backgroundColor=o[rnd(0,o.length-1)],document.getElementById("back").appendChild(e)}for(divsCount=rnd(n,l),i=1;i<=divsCount;i++){let e=document.createElement("div");e.id="frontDiv"+i,e.className="shape",a?(e.style.width=e.style.height=rnd(10,40)+"%",e.style.borderRadius="50%"):(e.style.width=rnd(2,80)+"%",e.style.height=rnd(2,10)+"%"),e.style.left=rnd(-15,95)+"%",e.style.top=rnd(-5,95)+"%",e.style.opacity=rnd(50,90)/100,e.style.zIndex=rnd(1,4),e.style.backgroundColor=o[rnd(0,o.length-1)],document.getElementById("divs").appendChild(e)}}let allPalettes={bw:["#000000","#ffffff"],colorPalette3984:["#222830","#b0b5b5","#ecbd8b","#f4841a"],colorPalette3980:["#59585e","#b7caca","#f5d8ad","#be865c","#b1a671"],colorPalette3916:["#213451","#6e819e","#d0aebc","#f6f4f5","#508b00"],vanGoghStarryNight:["#193962","#77b5d2","#171727","#6d7256","#edf7d4","#e6d770"],magritteSonOfMan:["#B60614","#3A282F","#909018","#E3BFA1","#EE833E"],AnthraciteMinuet:["#293757","#568D4B","#D5BB56","#D26A1B","#A41D1A"],mine1:["#822929","#479ab9","#242a2c","#d8cdaa"]};const empty="img/empty.png",redman="img/britishlibrary-11158378376.png",islanders="img/britishlibrary-11306853283.png",fdr="img/fdr.png",family="img/britishlibrary-12459031975.png",sky="img/britishlibrary-12459366944.png",winter="img/britishlibrary-11299952284.png",building="img/britishlibrary-11249708046.png",boats="img/britishlibrary-11301719536.png",ships="img/britishlibrary-11052019015.png",pistol="img/smith-and-wesson-938834_1280.png",bananas="img/bananas_640.png",skull="img/skull.png",netfamily="https://static1.squarespace.com/static/55947ac3e4b0fa882882cd65/58ab7d7229687f223f18a4d4/58ab9a1f15d5dbf18f36c20a/1487641219612/NS_0005.png";let bckMin=5,bckMax=10,divMin=3,divMax=10,circle=!1,palette=allPalettes.colorPalette3984,imgUrl=building;function reDraw(){removeElementsByClass("back"),removeElementsByClass("shape"),createComp(bckMin,bckMax,divMin,divMax,circle,palette,imgUrl)}function removeElementsByClass(e){let t=document.getElementsByClassName(e);for(;t.length>0;)t[0].parentNode.removeChild(t[0])}reDraw();let palEntries=Object.entries(allPalettes);for(i=0;i<palEntries.length;i++){let e=palEntries[i][0],t=palEntries[i][1],n=`\n    <div class="column col-3" id="colorPalette_${i}">\n        <div class="card">\n            <div class="card-image">\n                <ul>\n                    ${t.map(e=>`<li style="background-color: ${e};"></li>`).join("")}\n                </ul>\n            </div>\n            <div class="card-header">\n                <div class="card-title">${e}</div>\n            </div>\n            <div class="card-footer">\n                <a href="#close" class="btn btn-sm btn-success setpalette" data-palette="${e}">Choose</a>\n            </div>\n        </div>\n    </div>\n    `;document.getElementById("colorsGrid").innerHTML+=n}let newPath,allButtons=document.querySelectorAll(".setpalette");for(let e=0;e<allButtons.length;e++)allButtons[e].addEventListener("click",function(){let e=this.dataset.palette;palette=allPalettes[e],reDraw()});let imageRadios=document.querySelectorAll('[name="imageurl"]');for(let e=0;e<imageRadios.length;e++)imageRadios[e].addEventListener("change",function(){newPath=imageRadios[e].nextSibling.nextSibling.children[0].src});document.getElementById("chooseImage").onclick=function(){let e=document.getElementById("imagePath").value;null!=e&&""!=e&&(newPath=e),imgUrl=newPath,document.getElementById("imagePath").value="",reDraw()};let shapeRadios=document.querySelectorAll('[name="shape"]');for(var i=0;i<shapeRadios.length;i++)shapeRadios[i].addEventListener("change",function(){circle=!circle});document.getElementById("imgPos").onchange=function(){let e=this.options[this.selectedIndex].text;document.getElementById("imageholder").style.backgroundPosition=e},document.getElementById("imgSize").onchange=function(){let e=this.options[this.selectedIndex].text;document.getElementById("imageholder").style.backgroundSize=e},document.getElementById("w100").onclick=function(){document.getElementById("tela").classList.toggle("fullwidth")},document.getElementById("overflow").onclick=function(){document.getElementById("divs").classList.toggle("show")},document.getElementById("backMin").oninput=function(){this.setAttribute("value",this.value),bckMin=this.value},document.getElementById("backMax").oninput=function(){this.setAttribute("value",this.value),bckMax=this.value},document.getElementById("frontMin").oninput=function(){this.setAttribute("value",this.value),divMin=this.value},document.getElementById("frontMax").oninput=function(){this.setAttribute("value",this.value),divMax=this.value},document.getElementById("mainRedraw").onclick=function(){reDraw()};